{"version":3,"sources":["components/Searchbar/Searchbar.js","views/MoviesSearchPage/MoviesSearchPage.js","services/moviesApi.js","components/MovieGalleryItem/MovieGalleryItem.module.css","components/MovieGallery/MovieGallery.module.css","images/default_avatar.png","components/MovieGalleryItem/MovieGalleryItem.js","components/MovieGallery/MovieGallery.js","components/Searchbar/Searchbar.module.css","views/MoviesSearchPage/MoviesSearchPage.module.css"],"names":["Searchbar","onSubmitForm","useState","searchQuery","setSearchQuery","handleSearchChange","useCallback","e","currentTarget","value","toLowerCase","handleSearchSubmit","preventDefault","trim","toast","info","theme","className","s","searchbar","form","onSubmit","type","button","onClick","input","autoComplete","autoFocus","placeholder","onChange","MoviesSearchPage","query","setQuery","movies","setMovies","history","useHistory","location","useLocation","useRouteMatch","url","useEffect","search","newSearch","URLSearchParams","get","getMovies","requestMovieSearch","then","results","length","error","getSearchValue","push","MovieGallery","autoClose","API_KEY","BASE_URL","popularMovieGet","time","page","axios","response","data","catch","movieDetailsGet","movieId","movieReviewsGet","movieCastGet","cast","module","exports","MovieGalleryItem","movie","item","link","exact","to","pathname","id","state","from","label","src","poster_path","alt","original_title","width","image","titleWrap","title","list","map"],"mappings":"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","file":"static/js/4.b3033a1a.chunk.js","sourcesContent":["import React, { useState, useCallback } from 'react';\nimport s from './Searchbar.module.css';\n\nimport { toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\n\nfunction Searchbar({ onSubmitForm }) {\n  const [searchQuery, setSearchQuery] = useState('');\n\n  const handleSearchChange = useCallback(e => {\n    setSearchQuery(e.currentTarget.value.toLowerCase());\n  }, []);\n\n  const handleSearchSubmit = useCallback(\n    e => {\n      e.preventDefault();\n      if (searchQuery.trim() === '') {\n        return toast.info('Enter your request', {\n          theme: 'dark',\n        });\n      }\n      onSubmitForm(searchQuery);\n      setSearchQuery('');\n    },\n    [searchQuery, onSubmitForm],\n  );\n\n  return (\n    <>\n      <header className={s.searchbar}>\n        <form className={s.form} onSubmit={handleSearchSubmit}>\n          <button\n            type=\"submit\"\n            className={s.button}\n            onClick={handleSearchSubmit}\n          ></button>\n\n          <input\n            className={s.input}\n            type=\"text\"\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search\"\n            value={searchQuery}\n            onChange={handleSearchChange}\n          />\n        </form>\n      </header>\n    </>\n  );\n}\n\nexport default Searchbar;\n","import React, { useState, useEffect, useCallback } from 'react';\nimport { useHistory, useLocation, useRouteMatch } from 'react-router-dom';\n\nimport { requestMovieSearch } from '../../services/moviesApi';\n\nimport Searchbar from '../../components/Searchbar';\nimport MovieGallery from '../../components/MovieGallery';\nimport s from './MoviesSearchPage.module.css';\n\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport default_avatar from '../../images/default_avatar.png';\n\nconst MoviesSearchPage = () => {\n  const [query, setQuery] = useState('');\n  const [movies, setMovies] = useState(null);\n  const history = useHistory();\n  const location = useLocation();\n\n  const { url } = useRouteMatch();\n\n  useEffect(() => {\n    if (location.search === '') {\n      return;\n    }\n    const newSearch = new URLSearchParams(location.search).get('query');\n    setQuery(newSearch);\n  }, [location.search]);\n\n  useEffect(() => {\n    query && getMovies();\n  }, [query]);\n\n  const getMovies = () => {\n    requestMovieSearch(query).then(results => {\n      if (results.length === 0) {\n        toast.error(`No movies for your request ${query}`);\n        return;\n      }\n      setMovies(results);\n    });\n  };\n\n  const getSearchValue = useCallback(\n    query => {\n      setQuery(query);\n      setMovies([]);\n      history.push({ ...location, search: `query=${query}` });\n    },\n    [history, location],\n  );\n\n  return (\n    <>\n      <Searchbar onSubmitForm={getSearchValue} />\n      {movies && <MovieGallery movies={movies} />}\n      {/* {error && <p className={s.error}>{error}</p>} */}\n      {/* {error && (\n        <div>\n          <img src={defaultImage} alt=\"error\" className={s.defaultImage} />\n        </div>\n      )} */}\n      <ToastContainer autoClose={3000} />\n    </>\n  );\n};\n\nexport default MoviesSearchPage;\n","import axios from 'axios';\n\nconst API_KEY = '1d492e008148c42709362e98500fe1a3';\nconst BASE_URL = 'https://api.themoviedb.org/3/';\n\n// https://api.themoviedb.org/3/movie/76341?api_key=<<api_key>>\n\nexport function popularMovieGet(time = 'week', page = 1) {\n  return axios\n    .get(`${BASE_URL}trending/movie/${time}?api_key=${API_KEY}&page=${page}`)\n    .then(response => response.data.results)\n    .catch(error => error);\n}\n\nexport function requestMovieSearch(query, page = 1) {\n  return axios\n    .get(\n      `${BASE_URL}search/movie?api_key=${API_KEY}&language=en-US&page=${page}&query=${query}&include_adult=false`,\n    )\n    .then(response => response.data.results)\n    .catch(error => error);\n}\n\nexport function movieDetailsGet(movieId) {\n  return axios\n    .get(`${BASE_URL}movie/${movieId}?api_key=${API_KEY}&language=en-US`)\n    .then(response => response.data)\n    .catch(error => error);\n}\n\nexport function movieReviewsGet(movieId) {\n  return axios\n    .get(\n      `${BASE_URL}movie/${movieId}/reviews?api_key=${API_KEY}&language=en-US&page=1`,\n    )\n    .then(response => response.data.results)\n    .catch(error => error);\n}\n\nexport function movieCastGet(movieId) {\n  return axios\n    .get(\n      `${BASE_URL}movie/${movieId}/credits?api_key=${API_KEY}&language=en-US`,\n    )\n    .then(response => response.data.cast)\n    .catch(error => error);\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"link\":\"MovieGalleryItem_link__2yIKl\",\"item\":\"MovieGalleryItem_item__34vdF\",\"title\":\"MovieGalleryItem_title__Adss0\",\"titleWrap\":\"MovieGalleryItem_titleWrap__3by4z\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"list\":\"MovieGallery_list__298P6\"};","export default __webpack_public_path__ + \"static/media/default_avatar.2d3c9af7.png\";","import React from 'react';\nimport { Link, useRouteMatch, useLocation } from 'react-router-dom';\nimport s from './MovieGalleryItem.module.css';\n\nexport default function MovieGalleryItem({ movie }) {\n  const location = useLocation();\n  // const { url } = useRouteMatch();\n  return (\n    <li className={s.item}>\n      <Link\n        className={s.link}\n        exact\n        to={{\n          pathname: `/movies/${movie.id}`,\n          state: { from: location, label: 'Back to search' },\n        }}\n      >\n        <img\n          src={`https://image.tmdb.org/t/p/w300${movie.poster_path}`}\n          alt={movie.original_title}\n          width=\"300\"\n          className={s.image}\n        />\n        <div className={s.titleWrap}>\n          <h3 className={s.title}>{movie.original_title}</h3>\n        </div>\n      </Link>\n    </li>\n  );\n}\n","import React from 'react';\nimport MovieGalleryItem from '../MovieGalleryItem';\nimport s from './MovieGallery.module.css';\n\nexport default function MovieGallery({ movies }) {\n  return (\n    <ul className={s.list}>\n      {movies.map(item => (\n        <MovieGalleryItem movie={item} key={item.id} />\n      ))}\n    </ul>\n  );\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchbar\":\"Searchbar_searchbar__jo466\",\"form\":\"Searchbar_form__XuKjc\",\"button\":\"Searchbar_button__MhnaU\",\"button-label\":\"Searchbar_button-label__14f0Y\",\"input\":\"Searchbar_input__2C4aO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"error\":\"MoviesSearchPage_error__1c8ZY\",\"defaultImage\":\"MoviesSearchPage_defaultImage__2mrzX\"};"],"sourceRoot":""}